apiVersion: config.lighthouse.jenkins-x.io/v1alpha1
kind: TriggerConfig
spec:
  presubmits:
  - name: pr
    context: "pr"
    always_run: true
    optional: false
    source: "pullrequest.yaml"
  - name: deploy
    context: "deploy"
    always_run: true
    optional: false
    trigger: '/jx deploy'
    rerun_command: '/jx deploy'
    source: "https://github.com/chanmi910/jx3-spring-demo/blob/master/.lighthouse/jenkins-x/deploy.yaml"       
  postsubmits:
  - name: release
    context: "release"
    source: "release.yaml"
    branches:
    - ^main$
    - ^master$
  - name: deploy
    context: "deploy"
    always_run: true
    optional: false
    trigger: '/jx deploy'
    rerun_command: '/jx deploy'
    source: "https://github.com/chanmi910/jx3-spring-demo/blob/master/.lighthouse/jenkins-x/deploy.yaml"      
